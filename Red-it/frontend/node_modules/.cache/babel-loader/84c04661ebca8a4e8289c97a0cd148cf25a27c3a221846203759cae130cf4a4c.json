{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import\"./LoginSignup.css\";import userIcon from\"./Assets/user.png\";import emailIcon from\"./Assets/mail.png\";import lockIcon from\"./Assets/padlock.png\";import Summary from'./summary.jsx';import Dashboard from'./dashboard.jsx';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginSignup(){const[isLoginActive,setIsLoginActive]=useState(false);const[isLoggedIn,setIsLoggedIn]=useState(false);const handleSignupSubmit=async event=>{event.preventDefault();const form=event.target;const formData=new FormData(form);const username=formData.get(\"name\");const email=formData.get(\"email\");const password=formData.get(\"password\");try{const response=await fetch(\"http://127.0.0.1:8000/newuser/\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({username,email,password})});if(response.ok){const data=await response.json();alert(\"User creation successful: \"+data);}else{const errorData=await response.json();alert(\"User creation error: \"+errorData.detail);}}catch(error){alert(\"Network or fetch error:\",error.message);}};const handleLoginSubmit=async event=>{event.preventDefault();const form=event.target;const formData=new FormData(form);const email=formData.get(\"email\");const password=formData.get(\"password\");try{const response=await fetch(\"http://127.0.0.1:8000/login/\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email,password})});if(response.ok){const data=await response.json();alert(\"Login successful:\",data);localStorage.setItem(\"loggedInUser\",true);setIsLoggedIn(true);// Proceed with user login flow\n}else{const errorData=await response.json();alert(\"Login error:\",errorData.detail);}}catch(error){alert(\"Network or fetch error:\",error.message);}};const handleLogout=()=>{localStorage.removeItem(\"loggedInUser\");setIsLoggedIn(false);};const isLoggedIn2=localStorage.getItem('loggedInUser');if(isLoggedIn2){return/*#__PURE__*/_jsx(Dashboard,{onLogout:handleLogout});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"toggle-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsLoginActive(false),className:!isLoginActive?\"active\":\"\",children:\"Sign Up\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsLoginActive(true),className:isLoginActive?\"active\":\"\",children:\"Login\"})]}),isLoginActive?/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:handleLoginSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"img\",{src:emailIcon,alt:\"Email\",className:\"input-icon\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",placeholder:\"Enter your email\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"img\",{src:lockIcon,alt:\"Password\",className:\"input-icon\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",placeholder:\"Enter your password\",required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn\",children:\"Login\"}),/*#__PURE__*/_jsx(\"div\",{className:\"invisible-placeholder\"})]}):/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:handleSignupSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Sign Up\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"img\",{src:userIcon,alt:\"User\",className:\"input-icon\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",name:\"name\",placeholder:\"Enter your name\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"img\",{src:emailIcon,alt:\"Email\",className:\"input-icon\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",placeholder:\"Enter your email\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"img\",{src:lockIcon,alt:\"Password\",className:\"input-icon\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",placeholder:\"Enter your password\",required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn\",children:isLoginActive?\"Login\":\"Sign Up\"})]})]});};export default LoginSignup;","map":{"version":3,"names":["React","useState","useEffect","userIcon","emailIcon","lockIcon","Summary","Dashboard","jsx","_jsx","jsxs","_jsxs","LoginSignup","isLoginActive","setIsLoginActive","isLoggedIn","setIsLoggedIn","handleSignupSubmit","event","preventDefault","form","target","formData","FormData","username","get","email","password","response","fetch","method","headers","body","JSON","stringify","ok","data","json","alert","errorData","detail","error","message","handleLoginSubmit","localStorage","setItem","handleLogout","removeItem","isLoggedIn2","getItem","onLogout","className","children","onClick","onSubmit","src","alt","type","id","name","placeholder","required"],"sources":["C:/Users/Hp/Red-it/Red-it/frontend/src/components/loginSignup.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"./LoginSignup.css\";\r\nimport userIcon from \"./Assets/user.png\";\r\nimport emailIcon from \"./Assets/mail.png\";\r\nimport lockIcon from \"./Assets/padlock.png\";\r\nimport Summary from './summary.jsx';\r\nimport Dashboard from './dashboard.jsx';\r\n\r\nfunction LoginSignup() {\r\n  const [isLoginActive, setIsLoginActive] = useState(false);\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n\r\n  const handleSignupSubmit = async (event) => {\r\n    event.preventDefault();\r\n    const form = event.target;\r\n    const formData = new FormData(form);\r\n\r\n    const username = formData.get(\"name\");\r\n    const email = formData.get(\"email\");\r\n    const password = formData.get(\"password\");\r\n\r\n    try {\r\n      const response = await fetch(\"http://127.0.0.1:8000/newuser/\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          username,\r\n          email,\r\n          password,\r\n        }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        alert(\"User creation successful: \" + data);\r\n      } else {\r\n        const errorData = await response.json();\r\n        alert(\"User creation error: \" + errorData.detail);\r\n      }\r\n    } catch (error) {\r\n      alert(\"Network or fetch error:\", error.message);\r\n    }\r\n  };\r\n\r\n  const handleLoginSubmit = async (event) => {\r\n    event.preventDefault();\r\n    const form = event.target;\r\n    const formData = new FormData(form);\r\n\r\n    const email = formData.get(\"email\");\r\n    const password = formData.get(\"password\");\r\n\r\n    try {\r\n      const response = await fetch(\"http://127.0.0.1:8000/login/\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          email,\r\n          password,\r\n        }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        alert(\"Login successful:\", data);\r\n        localStorage.setItem(\"loggedInUser\", true);\r\n        setIsLoggedIn(true);\r\n        // Proceed with user login flow\r\n      } else {\r\n        const errorData = await response.json();\r\n        alert(\"Login error:\", errorData.detail);\r\n      }\r\n    } catch (error) {\r\n      alert(\"Network or fetch error:\", error.message);\r\n    }\r\n  };\r\n  const handleLogout = () => {\r\n    localStorage.removeItem(\"loggedInUser\");\r\n    setIsLoggedIn(false);\r\n  };\r\n  const isLoggedIn2 = localStorage.getItem('loggedInUser');\r\n  if (isLoggedIn2) {\r\n    return <Dashboard onLogout={handleLogout} />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"toggle-buttons\">\r\n        <button\r\n          onClick={() => setIsLoginActive(false)}\r\n          className={!isLoginActive ? \"active\" : \"\"}\r\n        >\r\n          Sign Up\r\n        </button>\r\n        <button\r\n          onClick={() => setIsLoginActive(true)}\r\n          className={isLoginActive ? \"active\" : \"\"}\r\n        >\r\n          Login\r\n        </button>\r\n      </div>\r\n      {isLoginActive ? (\r\n        <form className=\"form\" onSubmit={handleLoginSubmit}>\r\n          <h2>Login</h2>\r\n          <div className=\"form-control\">\r\n            <img src={emailIcon} alt=\"Email\" className=\"input-icon\" />\r\n            <input\r\n              type=\"email\"\r\n              id=\"email\"\r\n              name=\"email\"\r\n              placeholder=\"Enter your email\"\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"form-control\">\r\n            <img src={lockIcon} alt=\"Password\" className=\"input-icon\" />\r\n            <input\r\n              type=\"password\"\r\n              id=\"password\"\r\n              name=\"password\"\r\n              placeholder=\"Enter your password\"\r\n              required\r\n            />\r\n          </div>\r\n          <button type=\"submit\" className=\"btn\">\r\n            Login\r\n          </button>\r\n          <div className=\"invisible-placeholder\"></div>\r\n        </form>\r\n      ) : (\r\n        <form className=\"form\" onSubmit={handleSignupSubmit}>\r\n          <h2>Sign Up</h2>\r\n          <div className=\"form-control\">\r\n            <img src={userIcon} alt=\"User\" className=\"input-icon\" />\r\n            <input\r\n              type=\"text\"\r\n              id=\"name\"\r\n              name=\"name\"\r\n              placeholder=\"Enter your name\"\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"form-control\">\r\n            <img src={emailIcon} alt=\"Email\" className=\"input-icon\" />\r\n            <input\r\n              type=\"email\"\r\n              id=\"email\"\r\n              name=\"email\"\r\n              placeholder=\"Enter your email\"\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"form-control\">\r\n            <img src={lockIcon} alt=\"Password\" className=\"input-icon\" />\r\n            <input\r\n              type=\"password\"\r\n              id=\"password\"\r\n              name=\"password\"\r\n              placeholder=\"Enter your password\"\r\n              required\r\n            />\r\n          </div>\r\n          <button type=\"submit\" className=\"btn\">\r\n            {isLoginActive ? \"Login\" : \"Sign Up\"}\r\n          </button>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginSignup;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}